import { Injectable } from '@angular/core';
import { HttpClient , HttpHeaders} from '@angular/common/http';
import * as moment from "moment";
@Injectable({
  providedIn: 'root'
})
export class ChartService {
  tempData = [{"title":"It's not just Haryana's Hathnikund Barrage: 10 reasons why Delhi is flooded","summary":"Floodplain encroachment, vanishing wetlands and the 25 bridges on the path of the Yamuna in Delhi have aggravated the flooding of the river, experts have concurred. Rain is not the only culprit. In the last four days, Delhi has seen little or no rain but the river has risen and risen. A lot has been said about the release of water from the Hathnikund Barrage in Haryana. However, the numbers don't add up well for this argument, either.","sentiment":"Negative","score":-0.7834,"published":"Fri, 14 Jul 2023 07:16:29 +0530","count":1},{"title":"Chandrayaan-3 launch today, landing expected at 5.47pm Aug 23","summary":"If all goes as per plan, Chandrayaan-3 lander Vikram will touch down on the lunar surface at 5.47pm on August 23, after a 40-day journey, at least two people part of the mission confirmed to TOI.\nIsro's LMV3 rocket carrying the lander — and the rover inside — will lift off from Sriharikota at 2.35pm on Friday.\nIf Vikram manages to soft-land, India will be the fourth country — after the US, Russia and China — to achieve the scientific feat.\n\"As per calculations now, Vikram should land on Moon at 5.47pm on August 23; it may change due to variations in mission profile.\nThe two payloads onPragyan (rover) will study the composition of Moon’s surface using X Ray and laser.","sentiment":"Neutral","score":0.0,"published":"Fri, 14 Jul 2023 06:16:37 +0530","count":1},{"title":"Watch — ITR e-filing: Imp rebates, exempt incomes to claim for lower tax","summary":"ITR filing on Income Tax portal: Take note of the tax exemptions and deductions listed out in this week's TOI Wallet Talks episode so that you don't miss out on claiming them when filing your income tax return for FY 2022-23.","sentiment":"Positive","score":0.1139,"published":"Fri, 14 Jul 2023 10:33:07 +0530","count":1},{"title":"Gurgaon: Car on wrong side rams scooter, class II girl dies","summary":"A Class II student died after a car on the wrong side of a road hit a scooter that her father was driving to drop her to school on Thursday morning in Sector 22. After the collision, the car driver allegedly tried to flee, crushing the girl’s head and running over her father’s arm.","sentiment":"Negative","score":-0.9153,"published":"Fri, 14 Jul 2023 04:29:35 +0530","count":1},{"title":"Justices Bhuyan & Bhatti sworn in as Supreme Court judges","summary":"With the swearing-in of Justices Bhuyan and Bhatti, the working strength of judges in the apex court has risen to 32 against the sanctioned strength of 34, including the CJI. The central government had cleared the names of Justice Bhuyan, who was the chief justice of the Telangana high court, and Justice Bhatti, his counterpart in Kerala, for elevation to the top court on July 12.","sentiment":"Positive","score":0.9571,"published":"Fri, 14 Jul 2023 10:52:54 +0530","count":1},{"title":"‘Robbers’ kill Andhra farmer who made ‘millions’ selling tomatoes","summary":"The 62-year-old farmer, identified as Narem Rajasekhar Reddy, was found dead on the outskirts of his village on Wednesday.","sentiment":"Negative","score":-0.6486,"published":"Fri, 14 Jul 2023 08:33:50 +0530","count":1},{"title":"Arrived in style! Wishes pour in as Jaiswal shines on debut","summary":"From selling pani puri and living in a tent on Mumbai maidans to a fairytale debut outing in West Indies, Yashasvi Jaiswal was a buzz on social media Thursday evening as the young batting sensation became just the third Indian opener to slam a ton on Test debut. Playing his first international game, that too on foreign soil, Jaiswal fired a commanding century to put India in pole position in the first Test in Dominica.","sentiment":"Negative","score":-0.6597,"published":"Fri, 14 Jul 2023 09:48:13 +0530","count":1},{"title":"Aditya Roy Kapur and Ananya Panday’s age gap isn't anyone’s business!","summary":"Ananya Panday and Aditya Roy Kapur are rumoured to be in a relationship since a while now. The couple has refused to comment on their romance and were recently spotted in Portugal, seemingly enjoying a vacation. Soon after their pictures went viral, Ananya and Aditya were age shamed on social media.","sentiment":"Positive","score":0.296,"published":"Fri, 14 Jul 2023 10:25:56 +0530","count":1},{"title":"LeT recruiter Pasha mastermind behind extortion calls to Gadkari","summary":"Lashkar-e-Taiba (LeT) operative Afsar Pasha, instrumental in recruiting and conducting sleeper cell in the Belagavi jail, planned the two extortion calls made to Union minister Nitin Gadkari while co-accused Jayesh Kantha alias Jayesh Pujari executed it, cops said.","sentiment":"Neutral","score":0.0,"published":"Fri, 14 Jul 2023 04:49:00 +0530","count":1},{"title":"India's UPI to be used in France, starting at Eiffel: PM Modi","summary":"Calling for restructuring of the UN Security Council to reflect global realities, PM Narendra Modi has batted for India’s inclusion as a permanent member of the body, saying the “issue is not just about credibility, but something much larger”, and wondering how the world’s largest democracy and most populous country can be denied its rightful place.","sentiment":"Negative","score":-0.4854,"published":"Fri, 14 Jul 2023 03:01:25 +0530","count":1},{"title":"Para javelin thrower Sumit wins gold at Worlds","summary":"Indian Paralympic gold medallist Sumit Antil etched his name in the record books once again by setting a new world record in the F64 javelin throw event at the World Para-Athletics Championship in Paris.","sentiment":"Positive","score":0.4404,"published":"Thu, 13 Jul 2023 22:40:54 +0530","count":1},{"title":"Ajit gets finance dept despite opposition from Sena leaders","summary":"The ministries of finance, planning, cooperation and agriculture, among others, will be given to the Ajit Pawar group of NCP in the state government in the portfolio allocation which will likely be declared soon, senior NCP sources involved in negotiations with BJP and Shiv Sena said. Ajit will keep the finance portfolio for himself, sources said.","sentiment":"Neutral","score":0.0,"published":"Fri, 14 Jul 2023 04:51:15 +0530","count":1},{"title":"34 more deaths take monsoon fury toll in north India to 150","summary":"The toll in the northern states ravaged by rains for the last six days reached 150 Thursday with 34 fresh casualties reported in the last 24 hours. The flood situation remained grim in Punjab, Haryana and Uttar Pradesh even as relief teams rescued more than 1,000 stranded tourists and locals from Himachal Pradesh’s Lahaul Spiti and Kinnaur districts — including 255 people stuck in the picturesque Chandrataal area.","sentiment":"Positive","score":0.6705,"published":"Fri, 14 Jul 2023 06:45:57 +0530","count":1},{"title":"PM Modi conferred with France's highest honour","summary":"French President Emmanuel Macron awarded Indian Prime Minister Narendra Modi with the highest French honour, the Grand Cross of the Legion of Honour. The ceremony was held at the Elysee Palace as part of Modi's two-day visit to Paris.","sentiment":"Positive","score":0.9201,"published":"Fri, 14 Jul 2023 06:43:48 +0530","count":1},{"title":"This is just the start: Jaiswal after ton on Test debut","summary":"As Yashasvi Jaiswal etched his name into record books, becoming just the third Indian opener and 17th overall to score a century on Test debut, the rising young talent after a memorable outing said it is just the beginning and he's looking forward to contributing more in the future. Resuming on the overnight score of 40, Jaiswal, on Day 2 of the ongoing Test against West Indies in Dominica, went on to slam his first ton and remained unbeaten on 143 at the close of play as India took a 162-run first innings lead.","sentiment":"Positive","score":0.7783,"published":"Fri, 14 Jul 2023 08:06:31 +0530","count":1},{"title":"Assam’s BJP govt says it wants to ban polygamy ‘immediately’","summary":"Assam chief minister Himanta Biswa Sarma said on Thursday his government wants “to take up one of the segments of Uniform Civil Code (UCC)” and ban polygamy in the state “immediately” by tabling a bill in the assembly. The Assam government set up a four-member expert committee in May to examine if polygamy can be banned in the state through a state law. The committee headed by retired Gauhati high court judge Rumi Phukan has been given 60 days to submit its report.","sentiment":"Negative","score":-0.765,"published":"Fri, 14 Jul 2023 05:54:39 +0530","count":1},{"title":"Govt gives nod to acquisition of 26 naval Rafale jets","summary":"The defence ministry on Thursday approved the acquisition of 26 Rafale-Marine fighter jets and three Scorpene diesel-electric submarines from France, paving the way for the formal announcement of the two proposed mega deals at the Modi-Macron summit on Friday.","sentiment":"Positive","score":0.5859,"published":"Fri, 14 Jul 2023 02:47:08 +0530","count":1},{"title":"European Parliament calls for end to Manipur violence","summary":"The European Parliament adopted at its plenary session in France's Strasbourg late Wednesday a joint motion by six political groups seeking decisive steps to end the \"ethnic and religious violence\" in the northeastern state.","sentiment":"Negative","score":-0.4939,"published":"Fri, 14 Jul 2023 02:57:08 +0530","count":1},{"title":"HC: Must differentiate age of consent from age of marriage","summary":"While acquitting a 25-year-old in a case of consensual sexual relatiosnhip with a 17-year-old, the Bombay HC noted that criminalisation of adolescents’ romantic relationships is overburdening the system by “consuming significant time of the judiciary, police and the child protection system and ultimately when the victim turns hostile by not supporting the charge against the accused… (resulting) in an acquittal.”","sentiment":"Negative","score":-0.0788,"published":"Fri, 14 Jul 2023 06:00:07 +0530","count":1},{"title":"Yamuna rages, national capital Delhi drowns in misery","summary":"Continuous water discharge from the Hathnikund barrage in Yamuna Nagar district of Haryana on Thursday led to the worst flooding in the capital in 45 years. The water began flowing into some of Delhi’s main arteries like Ring Road and GT Karnal Road and inundated the residential area of Civil Lines and transport hub ISBT at Kashmere Gate besides the low-lying areas near Kalindi Kunj.","sentiment":"Positive","score":0.0601,"published":"Fri, 14 Jul 2023 02:23:40 +0530","count":1},{"title":"1st Test: Yashasvi slams ton on debut as India take control","summary":"Young Yashasvi Jaiswal scored a mature century on debut and added a record 229 runs for the opening wicket with his skipper Rohit Sharma, who scored his 10th hundred, as India seized complete control of the first Test against West Indies on Friday. Debutant Jaiswal scored an unbeaten 143, off 350 balls, and along with Virat Kohli (36*) powered India to 312\/2 at stumps on the second day.","sentiment":"Positive","score":0.7906,"published":"Fri, 14 Jul 2023 03:33:59 +0530","count":1},{"title":"‘Send Seema back or face hit like 26\/11’: Mumbai cops get threat","summary":"The security agencies have begun probing a series of WhatsApp messages, sent by an unidentified person to the city traffic police control room threatening a 26\/11-type terror attack if Seema Haider, a Pakistani national, was not sent back to Pakistan. Seema, along with her four children, had entered India illegally via Nepal to be with her PUBG friend in Greater Noida in May this year.","sentiment":"Negative","score":-0.4215,"published":"Fri, 14 Jul 2023 05:36:14 +0530","count":1},{"title":"NMC notifies deferment of NExT for 2019 MBBS batch","summary":"NEW DELHI: The National Medical Commission (NMC) on Thursday released a public notice announcing that the National Exit Test ( NExT ) has been deferred for final year MBBS students of the 2019 batch.\nThis follows a directive sent by the health ministry in this regard, the NMC said.There was, however, no announcement on the mock NExT to be held on July 28.\nThe NMC had recently introduced the regulations for NExT 2023, outlining that the exam would be held in two phases in a year.Once students clear the NExT Step 1 exam, they would have to complete their one-year internship.\nIt would serve as a licentiate examination.Additionally, NExT would be used to determine eligibility and ranking for admission to PG medical education in various medical specialisations.\nIt would serve as an entrance exam for PG medical courses.","sentiment":"Negative","score":-0.34,"published":"Fri, 14 Jul 2023 04:40:27 +0530","count":1},{"title":"After court win to make baby powder, J&J gives up licence","summary":"Three years since ceasing production of its talc-based powders in the US and Canada, pharmaceutical giant Johnson and Johnson recently surrendered its licence to manufacture baby powder in its Mumbai plant. The company said the decision to stop manufacturing baby powder in India was part of a global move to switch from talc-based to cornstarch-based baby powders.","sentiment":"Negative","score":-0.296,"published":"Fri, 14 Jul 2023 04:32:34 +0530","count":1},{"title":"Countries must unitedly fight borderless online crimes: Shah","summary":"Stating that no country or organisation can combat cyber threats in isolation, Shah, at the G-20 event attended by 900 delegates from member countries, nine guest nations and organisations like Interpol etc, urged all nations to rise above geographical boundaries and unitedly fight “borderless” online crimes like cyber-terror, online radicalisation, sale of critical personal data and ‘toolkit-based’ misinformation campaigns, as also the growing tendency to target critical information, digital public infrastructure and financial systems.Shah called upon the G-20 mechanism to bring uniformity in laws of member countries to counter digital crimes.\n“Today, all the governments of the world are promoting digital means in governance and public welfare,” he said.\nMetaverse, he added, also creates opportunities for true imitation of a user’s identity.\nShah specifically mentioned misinformation campaigns based on toolkits as a new cyberspace concern.The G-20 has thus far focused on digital transformation and data flow from an economic perspective.\nThis is the first G-20 conference on cyber security in the G-20, and assumes importance as the endeavour is to stay ahead in the era of NFTs, AI, Metaverse and other emerging technologies by responding in a timely manner.","sentiment":"Positive","score":0.3182,"published":"Fri, 14 Jul 2023 03:15:30 +0530","count":1},{"title":"Ties rooted in trust, commitment: PM Modi","summary":"Ahead of his formal talks with French President Emmanuel Macron on Friday, PM Narendra Modi said he was looking forward to holding wide-ranging discussions on taking forward the “long-standing and time-tested” partnership with France over the next 25 years.","sentiment":"Neutral","score":0.0,"published":"Fri, 14 Jul 2023 02:39:15 +0530","count":1},{"title":"Macron hails India as ‘a giant in history of world’","summary":"Celeb looks that prove parrot green is in this season!\nEntertainment","sentiment":"Positive","score":0.4753,"published":"Fri, 14 Jul 2023 02:34:28 +0530","count":1},{"title":"India slams EU Parliament's Manipur resolution","summary":"India on Thursday hit back strongly at the European Parliament for adopting a resolution over the recent clashes in Manipur, saying that such interference in the country's internal affairs is \"unacceptable\".\"We have seen that the European Parliament held a discussion on developments in Manipur and adopted a so-called Urgency Resolution. Such interference in India's internal affairs is unacceptable, and reflects a colonial mindset,\" external affairs ministry spokesperson Arindam Bagchi said.","sentiment":"Negative","score":-0.2263,"published":"Thu, 13 Jul 2023 22:38:56 +0530","count":1},{"title":"Yashasvi third Indian opener to hit century on Test debut","summary":"Young sensation Yashasvi Jaiswal demonstrated remarkable resilience and unwavering passion as he notched up a century on his debut against the West Indies on Day 2 of the first Test in Dominica.","sentiment":"Positive","score":0.765,"published":"Thu, 13 Jul 2023 23:51:24 +0530","count":1},{"title":"ICC announces equal prize money for men's and women's teams","summary":"In a landmark decision, the International Cricket Council (ICC) on Thursday has declared that men's and women's teams competing in ICC events will receive equal prize money.","sentiment":"Positive","score":0.5574,"published":"Thu, 13 Jul 2023 20:18:31 +0530","count":1},{"title":"Age of consent under POCSO in India perhaps highest globally: HC","summary":"The Bombay HC has said that several countries have reduced the age of consent for adolescents to enter into a consensual sexual relationship and it is high time our country and Parliament are also cognizant of the happenings around the world.A single bench of Justice Bharati Dangre expressed concern over the increasing number of criminal cases under the POCSO Act, where the accused are castigated even when the victims, being adolescents, maintain they were in a consensual relationship.","sentiment":"Negative","score":-0.3182,"published":"Thu, 13 Jul 2023 19:00:39 +0530","count":1},{"title":"Pak PM Sharif will hand over power to caretaker govt","summary":"Pakistan’s Prime Minister Shehbaz Sharif said he will handover the power to a caretaker government in August, ending speculation that his administration was seeking to extend its term and moving a step closer to national elections.“We will hand over the responsibility to the caretaker government in August 2023,” he said in a televised speech to nation on Thursday.","sentiment":"Positive","score":0.5994,"published":"Thu, 13 Jul 2023 20:33:19 +0530","count":1},{"title":"Maharashtra cabinet expansion most likely on Friday","summary":"Days after major developments in Maharashtra politics, the ruling Shiv Sena on Thursday said the state cabinet's expansion and allocation of portfolios are most likely to happen on July 14.","sentiment":"Neutral","score":0.0,"published":"Thu, 13 Jul 2023 20:21:24 +0530","count":1},{"title":"India-China trade shows first signs of slowdown in years","summary":"The India-China trade, which in recent years rose sharply despite bilateral tensions over the border dispute, showed the first signs of a slowdown in years falling by 0.9 per cent in the first half of this year.China's exports to India in the first half of this year totalled $56.53 billion compared to $57.51 billion last year registering a decline of 0.9 per cent, according to the data released by Chinese customs on Thursday.","sentiment":"Negative","score":-0.2598,"published":"Thu, 13 Jul 2023 19:10:10 +0530","count":1},{"title":"Delhi in uncharted waters as Yamuna continues to flow at 208.62 metres","summary":"Delhi was in uncharted waters as Yamuna continues to flow at 208.62 metres, above the danger mark. However, no changes were recorded in the water levels of the river in the past two hours, an official statement said on Thursday. Here are the key developments:","sentiment":"Negative","score":-0.6808,"published":"Thu, 13 Jul 2023 19:51:27 +0530","count":1},{"title":"BJP claims worker killed in police lathicharge in Bihar","summary":"Jehanabad Bharatiya Janata Party (BJP) district general secretary Vijay Kumar Singh on Thursday succumbed after being admitted to Patna Medical College Hospital (PMCH) for treatment, following grievous injuries allegedly received in the heavy lathi-charge resorted to by Bihar police on the participants of the BJP's Vidhan Sabha march on Thursday.","sentiment":"Neutral","score":0.0258,"published":"Thu, 13 Jul 2023 15:41:04 +0530","count":1}]

  data: any = this.tempData;
  constructor(private http: HttpClient) {
  }

  fetchChartData() {
    const headers = new HttpHeaders({ 'Referrer-Policy': 'no-referrer' });
    this.http.get("https://new-n6osqbff7q-uc.a.run.app/data",{headers}).subscribe(data => {
      console.log('DATA : ', data)
      this.data = data
    })
  }

  extractData(key: string, data: any) {
    if (data && data.length) {
      console.log("KUMAR : ", data.map((item: any) => (item[key])))
      return data.map((item: any) => (item[key]))
    }
  }

  extractColor(key: string, data: any) {
    if (data && data.length) {
      return data.map((item: any) => (item[key] === "Positive" ? "green" : item[key] === "Negative" ? "red" : "orange"))
    }
  }

  extractTimeData(key: string, data: any) {
    if (data && data.length) {
      console.log("KUMAR : ", data.map((item: any) => (item[key])))
      return data.map((item: any) => (moment(item[key]).format('HH:MM')));
    }
  }

  footer(tooltipItems: any, data: any) {
    console.log('TOOLTIP : ', tooltipItems)
    return this.data[tooltipItems && tooltipItems[0] && tooltipItems[0].dataIndex].summary;
  };


}
